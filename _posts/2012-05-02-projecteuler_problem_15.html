---
layout: post
status: publish
published: true
title: projecteuler problem 15
author:
  display_name: hippo
  login: admin
  email: kimiscircle@gmail.com
  url: http://blog.futureme.info
author_login: admin
author_email: kimiscircle@gmail.com
author_url: http://blog.futureme.info
wordpress_id: 45
wordpress_url: http://localhost/?p=41
date: '2012-05-02 10:59:22 +0800'
date_gmt: '2012-05-02 10:59:22 +0800'
categories:
- projecteuler
tags: []
comments: []
---
<div id="BlogArticleDetail" style="font-size: 14px;">                     &nbsp;&nbsp;&nbsp;&nbsp; 这是一个很有趣的题，可以用很多巧妙的方法解，当然也少不了数学方法.<br &#47;>&nbsp;&nbsp;&nbsp; <br &#47;><br />
<h2 style="cursor:help;" title="Solved by 53267">Problem 15<&#47;h2>
<div title="Published on 19 April 2002 at 05:00 pm" style="cursor:help;color:#666;font-size:80%;">19 April 2002<&#47;div><br &#47;>
<div class="problem_content" role="problem">
<p>Starting in the top left corner of a 2<img title=" projecteuler problem 15 - hejieL - hejiek的博客" src="http:&#47;&#47;img.bimg.126.net&#47;photo&#47;IFHj9TGQbFyEVmBN3sT65w==&#47;332421947512127660.gif" alt="&times;" style="vertical-align:middle;" border="0" height="9" width="9" &#47;>2 grid, there are 6 routes (without backtracking) to the bottom right corner.<&#47;p>
<div style="text-align:center;"> <img title=" projecteuler problem 15 - hejieL - hejiek的博客" src="http:&#47;&#47;img.bimg.126.net&#47;photo&#47;Ei39TlT4ca_ph0OmSDLPJA==&#47;332421947512127663.gif" alt="" &#47;> <&#47;div>
<p>How many routes are there through a 20<img title=" projecteuler problem 15 - hejieL - hejiek的博客" src="http:&#47;&#47;img.bimg.126.net&#47;photo&#47;IFHj9TGQbFyEVmBN3sT65w==&#47;332421947512127660.gif" alt="&times;" style="vertical-align:middle;" border="0" height="9" width="9" &#47;>20 grid?<&#47;p>
<p><br &#47;><&#47;p>
<p>&nbsp; 1. 初看起来似乎没什么感觉，但总结下，只是每个路径都必须有40条线，且有20条竖线和20条横线。<&#47;p>
<p>&nbsp;&nbsp; 组合数学告诉我们 answer：C(40,20) <br &#47;><&#47;p>
<p>&nbsp; 2. 递归调用，若每个节点，用坐标表示的话，routes(m,n)表示(0,0)到（m,n)的路线数，注意到routes(m,n)包括了经过， (m-1,n-1), (m,n-2),(m-2,n)的三种路径，而他们却不会重合。这就直接找出了 routes(m,n)的递推关系式，所以：<&#47;p>
<p>[code]<br &#47;><&#47;p>
<p>#include<stdio.h><br &#47;>long long int routes(int m,int n)<br &#47;>{<br &#47;>&nbsp;&nbsp;&nbsp; if(m==1)<br &#47;>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return n+1;<br &#47;>&nbsp;&nbsp;&nbsp; else if(n==1)<br &#47;>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return m+1;<br &#47;>&nbsp;&nbsp;&nbsp; else if(m==0||n==0)<br &#47;>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br &#47;>&nbsp;&nbsp;&nbsp; else<br &#47;>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 2*routes(m-1,n-1)+routes(m,n-2)+routes(m-2,n);<br &#47;>}<br &#47;>int main()<br &#47;>{<br &#47;>&nbsp;&nbsp;&nbsp; long long int&nbsp; count=0;<br &#47;>&nbsp;&nbsp;&nbsp; count=routes(20,20);<br &#47;>&nbsp;&nbsp;&nbsp; printf("%lldn",count);<br &#47;>&nbsp;&nbsp;&nbsp; return 0;<br &#47;>}<&#47;p>
<p>[&#47;code]<&#47;p>
<p>用了 1.597274065017700195312500000000s才跑出结果，不过很方便理解。<&#47;p>
<p>3.还好，有projecteuler优秀前辈的算法，现在列上几个好的C&#47;C++ code：<&#47;p>
<p><br &#47;><&#47;p>
<p><br &#47;><&#47;p><br />
<table class="forum_table">
<tbody>
<tr>
<td rowspan="2" class="forum_info">
<div style="font-size:85%;">15 Jul 2005 08:08 am<a name="1428" rel="nofollow">&nbsp;<&#47;a><&#47;div><span style="font-weight:bold;">roxtar<&#47;span><br &#47;>C&#47;C++&nbsp; <br &#47;><img src="http:&#47;&#47;projecteuler.net&#47;images&#47;flags&#47;India.gif" title="India" alt="India" style="border:1px solid #bbb;vertical-align:middle;" &#47;><&#47;td>
<td>
<div style="font-size:75%;text-align:right;font-weight:bold;">&nbsp; &nbsp;<a rel="nofollow" href="http:&#47;&#47;projecteuler.net&#47;quote_post=1428-5b50b">Quote<&#47;a>&nbsp; &nbsp;<a title="Give Kudos" rel="nofollow" href="http:&#47;&#47;projecteuler.net&#47;kudos_post=1428-5b50b"><img title=" projecteuler problem 15 - hejieL - hejiek的博客" alt=" projecteuler problem 15 - hejieL - hejiek的博客" src="http:&#47;&#47;projecteuler.net&#47;images&#47;icon_thumb_up.png" style="vertical-align:bottom;" &#47;> 0<&#47;a><&#47;div><&#47;td><&#47;tr><br />
<tr>
<td>
<div class="forum_message">My  solution uses a top down approach. For example for 1x1 grid, we can  reach the corner from its neighboring nodes in 1 way.  2----1 |      | 1----0  So to reach it from the top left corner we have 2 ways.  now suppose a 2x1 grid  3----1 |      | 2----1 |      | 1----0  We can reach the bottom right corner, from the top left corner, by  either taking the "down" route which has 2 ways, or the "right" way  which has 1 way.   So for any NxM grid construct a N+1 x M+1 matrix. Mark  matrix[N]<i>=1 matrix<&#47;i><i>[M]=1  Assuming indexing starts from 0.  The values for the rest of the cells can be evaluated by:  matrix<&#47;i><i>[j]=matrix[i+1][j] + matrix<&#47;i><i>[j+1]  where i=N-1 to 0 and j=M-1 to 0.<&#47;i><&#47;div><&#47;td><&#47;tr><&#47;tbody><&#47;table>
<p><i><&#47;i><i><&#47;i><i><&#47;i><i><&#47;i>
<pre class="prettyprint"><span class="com">#include<&#47;span><span class="str"><stdio.h><&#47;span><span class="pln"> <&#47;span><span class="com">#define<&#47;span><span class="pln"> XMAX <&#47;span><span class="lit">21<&#47;span><span class="pln"> <&#47;span><span class="com">#define<&#47;span><span class="pln"> YMAX <&#47;span><span class="lit">21<&#47;span><span class="pln"> <&#47;span><span class="kwd">int<&#47;span><span class="pln"> main<&#47;span><span class="pun">()<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln"> <&#47;span><span class="kwd">long<&#47;span><span class="pln"> <&#47;span><span class="kwd">long<&#47;span><span class="pln"> <&#47;span><span class="kwd">int<&#47;span><span class="pln"> matrix<&#47;span><span class="pun">[<&#47;span><span class="pln">XMAX<&#47;span><span class="pun">][<&#47;span><span class="pln">YMAX<&#47;span><span class="pun">];<&#47;span><span class="pln"> <&#47;span><span class="kwd">int<&#47;span><span class="pln"> i<&#47;span><span class="pun">,<&#47;span><span class="pln">j<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">i<&#47;span><span class="pun">=<&#47;span><span class="lit">0<&#47;span><span class="pun">;<&#47;span><span class="pln">i<&#47;span><span class="pun"><=<&#47;span><span class="pln">XMAX<&#47;span><span class="pun">-<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln">i<&#47;span><span class="pun">++)<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln">     matrix<&#47;span><span class="pun">[<&#47;span><span class="pln">XMAX<&#47;span><span class="pun">-<&#47;span><span class="lit">1<&#47;span><span class="pun">][<&#47;span><span class="pln">i<&#47;span><span class="pun">]=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln">     matrix<&#47;span><span class="pun">[<&#47;span><span class="pln">i<&#47;span><span class="pun">][<&#47;span><span class="pln">YMAX<&#47;span><span class="pun">-<&#47;span><span class="lit">1<&#47;span><span class="pun">]=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="pun">}<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">i<&#47;span><span class="pun">=<&#47;span><span class="pln">XMAX<&#47;span><span class="pun">-<&#47;span><span class="lit">2<&#47;span><span class="pun">;<&#47;span><span class="pln">i<&#47;span><span class="pun">>=<&#47;span><span class="lit">0<&#47;span><span class="pun">;<&#47;span><span class="pln">i<&#47;span><span class="pun">--)<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">j<&#47;span><span class="pun">=<&#47;span><span class="pln">YMAX<&#47;span><span class="pun">-<&#47;span><span class="lit">2<&#47;span><span class="pun">;<&#47;span><span class="pln">j<&#47;span><span class="pun">>=<&#47;span><span class="lit">0<&#47;span><span class="pun">;<&#47;span><span class="pln">j<&#47;span><span class="pun">--)<&#47;span><span class="pln">       matrix<&#47;span><span class="pun">[<&#47;span><span class="pln">i<&#47;span><span class="pun">][<&#47;span><span class="pln">j<&#47;span><span class="pun">]=<&#47;span><span class="pln">matrix<&#47;span><span class="pun">[<&#47;span><span class="pln">i<&#47;span><span class="pun">+<&#47;span><span class="lit">1<&#47;span><span class="pun">][<&#47;span><span class="pln">j<&#47;span><span class="pun">]+<&#47;span><span class="pln">matrix<&#47;span><span class="pun">[<&#47;span><span class="pln">i<&#47;span><span class="pun">][<&#47;span><span class="pln">j<&#47;span><span class="pun">+<&#47;span><span class="lit">1<&#47;span><span class="pun">];<&#47;span><span class="pln">   printf<&#47;span><span class="pun">(<&#47;span><span class="str">"%lld"<&#47;span><span class="pun">,<&#47;span><span class="pln">matrix<&#47;span><span class="pun">[<&#47;span><span class="lit">0<&#47;span><span class="pun">][<&#47;span><span class="lit">0<&#47;span><span class="pun">]);<&#47;span><span class="pln"> <&#47;span><span class="pun">}<&#47;span><&#47;pre><&#47;p>
<p>&nbsp;&nbsp; 这个用了&nbsp; 0.000071048736572265625s,超级快，算法也牛！<&#47;p>
<p><br &#47;><&#47;p>
<p>下面的也不错，都是数组的方法。<br &#47;><&#47;p><br />
<table style="width: 528px; height: 694px;" class="forum_table">
<tbody>
<tr>
<td rowspan="2" class="forum_info">
<div style="font-size:85%;">02 Mar 2012 05:53 am<a name="55412" rel="nofollow">&nbsp;<&#47;a><&#47;div><span style="font-weight:bold;">A.A.S.D.Maduwantha<&#47;span><br &#47;>C&#47;C++&nbsp; <br &#47;><img src="http:&#47;&#47;img.bimg.126.net&#47;photo&#47;_nCbs76EZDKdXZzbGYkE4w==&#47;332421947512127668.gif" title="Sri Lanka" alt="Sri Lanka" style="border:1px solid #bbb;vertical-align:middle;" &#47;><&#47;td>
<td>
<div style="font-size:75%;text-align:right;font-weight:bold;">&nbsp; &nbsp;<a rel="nofollow" href="http:&#47;&#47;projecteuler.net&#47;quote_post=55412-3cf8e">Quote<&#47;a>&nbsp; &nbsp;<a title="Give Kudos" rel="nofollow" href="http:&#47;&#47;projecteuler.net&#47;kudos_post=55412-3cf8e"><img title=" projecteuler problem 15 - hejieL - hejiek的博客" alt=" projecteuler problem 15 - hejieL - hejiek的博客" src="http:&#47;&#47;projecteuler.net&#47;images&#47;icon_thumb_up.png" style="vertical-align:bottom;" &#47;> 0<&#47;a><&#47;div><&#47;td><&#47;tr><br />
<tr>
<td>
<div class="forum_message">It got 0.047S to Reply the answer C For ever
<div class="code_click">
<table>
<tbody>
<tr>
<td>
<div style="text-align:left;">C&#47;C++<&#47;div><&#47;td>
<td>
<div id="click_554121">Hide Code<&#47;div><&#47;td><&#47;tr><&#47;tbody><&#47;table><&#47;div>
<div style="display: block;" id="content_554121" class="code_box">
<pre class="prettyprint"><span class="com">#include<&#47;span><span class="pln"> <&#47;span><span class="str"><stdio.h><&#47;span><span class="pln"> <&#47;span><span class="com">#include<&#47;span><span class="pln"> <&#47;span><span class="str"><stdlib.h><&#47;span><span class="pln"> <&#47;span><span class="kwd">int<&#47;span><span class="pln"> main<&#47;span><span class="pun">()<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln"> <&#47;span><span class="kwd">long<&#47;span><span class="pln"> <&#47;span><span class="kwd">long<&#47;span><span class="pln"> n<&#47;span><span class="pun">=<&#47;span><span class="lit">20<&#47;span><span class="pun">,<&#47;span><span class="pln">m<&#47;span><span class="pun">=<&#47;span><span class="lit">20<&#47;span><span class="pun">,<&#47;span><span class="pln">i<&#47;span><span class="pun">[<&#47;span><span class="pln">n<&#47;span><span class="pun">],<&#47;span><span class="pln">x<&#47;span><span class="pun">,<&#47;span><span class="pln">a<&#47;span><span class="pun">,<&#47;span><span class="pln">j<&#47;span><span class="pun">[<&#47;span><span class="pln">m<&#47;span><span class="pun">],<&#47;span><span class="pln">sum<&#47;span><span class="pun">=<&#47;span><span class="lit">0<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">n<&#47;span><span class="pun">=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln">n<&#47;span><span class="pun"><=<&#47;span><span class="lit">20<&#47;span><span class="pun">;<&#47;span><span class="pln">n<&#47;span><span class="pun">++)<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln">         i<&#47;span><span class="pun">[<&#47;span><span class="pln">n<&#47;span><span class="pun">]=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="pun">}<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">x<&#47;span><span class="pun">=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln">x<&#47;span><span class="pun"><=<&#47;span><span class="lit">19<&#47;span><span class="pun">;<&#47;span><span class="pln">x<&#47;span><span class="pun">++)<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">m<&#47;span><span class="pun">=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln">m<&#47;span><span class="pun"><=<&#47;span><span class="lit">20<&#47;span><span class="pun">;<&#47;span><span class="pln">m<&#47;span><span class="pun">++)<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln">             j<&#47;span><span class="pun">[<&#47;span><span class="pln">m<&#47;span><span class="pun">]=<&#47;span><span class="lit">0<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="pun">}<&#47;span><span class="pln">         m<&#47;span><span class="pun">=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">n<&#47;span><span class="pun">=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln">n<&#47;span><span class="pun"><=<&#47;span><span class="lit">20<&#47;span><span class="pun">;<&#47;span><span class="pln">n<&#47;span><span class="pun">++)<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln">             sum<&#47;span><span class="pun">+=<&#47;span><span class="pln">i<&#47;span><span class="pun">[<&#47;span><span class="pln">n<&#47;span><span class="pun">];<&#47;span><span class="pln"> <&#47;span><span class="pun">}<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">a<&#47;span><span class="pun">=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln">a<&#47;span><span class="pun"><=<&#47;span><span class="lit">20<&#47;span><span class="pun">;<&#47;span><span class="pln">a<&#47;span><span class="pun">++)<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">n<&#47;span><span class="pun">=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln">n<&#47;span><span class="pun"><=<&#47;span><span class="pln">a<&#47;span><span class="pun">;<&#47;span><span class="pln">n<&#47;span><span class="pun">++)<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln">                 j<&#47;span><span class="pun">[<&#47;span><span class="pln">m<&#47;span><span class="pun">]+=<&#47;span><span class="pln">i<&#47;span><span class="pun">[<&#47;span><span class="pln">n<&#47;span><span class="pun">];<&#47;span><span class="pln"> <&#47;span><span class="pun">}<&#47;span><span class="pln">             m<&#47;span><span class="pun">+=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="pun">}<&#47;span><span class="pln">         n<&#47;span><span class="pun">=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="kwd">for<&#47;span><span class="pun">(<&#47;span><span class="pln">m<&#47;span><span class="pun">=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln">m<&#47;span><span class="pun"><=<&#47;span><span class="lit">20<&#47;span><span class="pun">;<&#47;span><span class="pln">m<&#47;span><span class="pun">++)<&#47;span><span class="pln"> <&#47;span><span class="pun">{<&#47;span><span class="pln">             i<&#47;span><span class="pun">[<&#47;span><span class="pln">n<&#47;span><span class="pun">]=<&#47;span><span class="pln">j<&#47;span><span class="pun">[<&#47;span><span class="pln">m<&#47;span><span class="pun">];<&#47;span><span class="pln">             n<&#47;span><span class="pun">+=<&#47;span><span class="lit">1<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="pun">}<&#47;span><span class="pln"> <&#47;span><span class="pun">}<&#47;span><span class="pln">     printf<&#47;span><span class="pun">(<&#47;span><span class="str">"%lld"<&#47;span><span class="pun">,(<&#47;span><span class="pln">sum<&#47;span><span class="pun">+<&#47;span><span class="lit">1<&#47;span><span class="pun">)*<&#47;span><span class="lit">2<&#47;span><span class="pun">);<&#47;span><span class="pln"> <&#47;span><span class="kwd">return<&#47;span><span class="pln"> <&#47;span><span class="lit">0<&#47;span><span class="pun">;<&#47;span><span class="pln"> <&#47;span><span class="pun">}<br &#47;><&#47;span><&#47;pre><&#47;div><&#47;div><&#47;td><&#47;tr><&#47;tbody><&#47;table> <&#47;div><&#47;div></p>
